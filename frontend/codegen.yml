schema: http://localhost:8000/graphql
# Documents: where your .graphql/.gql queries/fragments live (if any)
documents:
  - src/queries/**/*.graphql # Recursively include all .graphql files for all mapped queries
# Generates both types and hooks
generates:
  src/types/graphql.ts:
    plugins:
      - typescript
    config:
      useTypeImports: false
      skipTypename: false
      preResolveTypes: true
      namingConvention:
        typeNames: change-case#pascalCase
        enumValues: change-case#upperCase
        transformUnderscore: true
      scalars:
        DateTime: string
        Date: string
        Currency: number
      avoidOptionals:
        field: false
        inputValue: false
  src/queries/:
    preset: near-operation-file
    presetConfig:
      extension: .generated.ts
      baseTypesPath: ../types/graphql.ts
    plugins:
      - typescript-operations
      - typescript-react-query
    config:
      # Fix for graphql-request issues
      fetcher: graphql-request
      useQueryObjectSyntax: true
      reactQueryVersion: 5
      useTypeImports: false
      skipTypename: false
      preResolveTypes: true
      # Avoid duplicate types
      dedupeOperationSuffix: true
      omitOperationSuffix: true
      # Fix import issues
      importOperationTypesFrom: Types
      importTypes: true
      # Custom fetcher to avoid import issues
      fetcherImport: |
        import { GraphQLClient } from 'graphql-request';
        import type { RequestInit } from 'graphql-request';
      # Use any for RequestInit to avoid import issues
      requestInitType: any
